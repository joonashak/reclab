Project reclab_cms {
  database_type: 'PostgreSQL'
}

Table user {
  id UUID [pk]
  username TEXT [not null, unique]
  passwordHash TEXT [not null]
  displayName TEXT
}

Table page {
  id UUID [pk]
  title TEXT [not null, default: '']
  content TEXT [not null, default: '']
  createdAt TIMESTAMPZ [not null, default: 'NOW()']
  updatedAt TIMESTAMPZ [not null, default: 'NOW()']
  authorId UUID [ref: > user.id, not null]
  editorId UUID [ref: > user.id, not null]
  languageId UUID [ref: > language.id, not null]
}

Table route {
  id UUID [pk]
  pageId UUID [ref: > page.id, not null]
  path TEXT [not null, unique]
}

Table language {
  id UUID [pk]
  code TEXT [not null]
  name TEXT [not null]
}

Table translation {
  originPageId UUID [ref: > page.id, not null]
  targetPageId UUID [ref: > page.id, not null]
  
  indexes {
    (originPageId, targetPageId) [pk]
  }
}

Table menuItem {
  id UUID [pk]
  title TEXT [not null]
  order INT [not null]
  path TEXT
  languageId UUID [ref: > language.id, not null]
  routeId UUID [ref: > route.id]
  
  indexes {
    (order, languageId) [unique]
  }
}
